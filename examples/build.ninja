verilisp = ../verilisp.py
iverilog = iverilog
iverilog_opt = -g2012

rule translate
    command = $verilisp $in

rule compile
    command = $iverilog $iverilog_opt -o $out $in

build all: phony timing-generator signal-log.v

build timing-generator.v: translate timing-generator.hvl
build timing-generator : compile timing-generator.v

build signal-log.v: translate signal-log.hvl
build signal-log : compile signal-log.v

build psdma.v: translate psdma.hvl
build psdma : compile psdma.v

